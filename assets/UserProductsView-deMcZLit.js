import{a as u}from"./axios-L6U4YIEh.js";import{_ as g,c as o,a as t,F as m,e as b,o as n,n as f,t as r,f as v,d as k}from"./index-oXJk3cL_.js";var y={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"eden",BASE_URL:"/2023-vue3-training-chapter-WK6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:_,VITE_PATH:h}=y,C={data(){return{products:[],tempProduct:{},status:{addCartLoading:"",cartQtyLoading:""},carts:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getProducts(){const s=`${_}/v2/api/${h}/products/all`;u.get(s).then(a=>{console.log(a),this.products=a.data.products})},openModal(s){this.tempProduct=s,this.$refs.userModal.open()},addCart(s,a=1){const i=`${_}/v2/api/${h}/cart`,l={product_id:s,qty:a};this.status.addCartLoading=s,u.post(i,{data:l}).then(d=>{console.log(d),this.status.addCartLoading="",this.$refs.userModal.close()})}},mounted(){this.getProducts()}},L={class:"container mt-4 text-center"},x=t("h2",null,"產品列表",-1),V={class:"table align-middle"},E=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),P={style:{width:"200px"}},$={key:0,class:"h5"},T={key:1},I={class:"h6"},M={class:"h5"},R={class:"btn-group btn-group-sm"},S=["onClick"],U=["disabled","onClick"],B={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function D(s,a,i,l,d,c){return n(),o("div",L,[x,t("table",V,[E,t("tbody",null,[(n(!0),o(m,null,b(d.products,e=>(n(),o("tr",{key:e.key},[t("td",P,[t("div",{style:f([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,r(e.title),1),t("td",null,[e.origin_price===e.price?(n(),o("div",$,r(e.price)+" 元 ",1)):(n(),o("div",T,[t("del",I,"原價 "+r(e.origin_price)+" 元",1),t("div",M,"現在只要 "+r(e.price)+" 元",1)]))]),t("td",null,[t("div",R,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:p=>c.openModal(e)}," 查看更多 ",8,S),t("button",{type:"button",class:"btn btn-outline-danger",disabled:e.id===d.status.addCartLoading,onClick:p=>c.addCart(e.id)},[e.id===d.status.addCartLoading?(n(),o("span",B)):v("",!0),k(" 加到購物車 ")],8,U)])])]))),128))])])])}const w=g(C,[["render",D]]);export{w as default};
